<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Report Issue - Fix My City</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="style.css">
</head>
<body class="bg-blue-50 text-gray-800">
<!-- Navbar (same as index.html) -->
<nav class="bg-blue-100 text-black px-6 py-2 flex justify-between items-center shadow-md sticky top-0 z-50">
  <div class="flex items-center space-x-3">
    <img src="logo.jpg" alt="SmartCity Logo" class="h-10 w-10 scale-125 object-contain transition-transform hover:scale-110">
    <h1 class="text-2xl font-semibold tracking-tight">Fix My City</h1>
  </div>
  <ul class="flex space-x-6 text-base font-medium">
    <li><a href="home.html" class="hover:text-blue-700 transition">Home</a></li>
    <li><a href="home.html#report" class="hover:text-blue-700 transition">Report</a></li>
    <li><a href="home.html#about" class="hover:text-blue-700 transition">Creators</a></li>
    <li><a href="status.html" class="hover:text-blue-700 transition">Status</a></li>
    <li><a href="support.html" class="hover:text-blue-700 transition">Support</a></li>
    <li><a href="faqs.html" class="hover:text-blue-700 transition">FAQs</a></li>
  </ul>
</nav>

<!-- Report Form Section -->
<section id="report-form" class="bg-blue-200 py-20 px-6">
  <div class="max-w-4xl mx-auto">
    <h2 class="text-4xl font-bold mb-6 text-gray-800 text-center">Submit Your Report</h2>
    <p class="text-lg mb-8 text-gray-700 text-center">Fill out the details below to report a local issue.</p>
    <form id="reportForm" action="#" method="POST" enctype="multipart/form-data" class="bg-white p-8 rounded-lg shadow-lg">
      <div class="grid md:grid-cols-2 gap-6">
        <!-- Name -->
        <div>
          <label for="name" class="block text-sm font-medium text-gray-700 mb-2">Name</label>
          <input
            type="text"
            id="name"
            name="name"
            required
            class="w-full px-4 py-3 border border-blue-300 rounded-md focus:ring-2 focus:ring-blue-600 focus:outline-none text-lg"
            placeholder="Enter your name"
          />
        </div>
        <!-- Age -->
        <div>
          <label for="age" class="block text-sm font-medium text-gray-700 mb-2">Age</label>
          <input
            type="number"
            id="age"
            name="age"
            required
            min="1"
            max="120"
            class="w-full px-4 py-3 border border-blue-300 rounded-md focus:ring-2 focus:ring-blue-600 focus:outline-none text-lg"
            placeholder="Enter your age"
          />
        </div>
        <!-- Area -->
        <div>
          <label for="area" class="block text-sm font-medium text-gray-700 mb-2">Area</label>
          <input
            type="text"
            id="area"
            name="area"
            required
            class="w-full px-4 py-3 border border-blue-300 rounded-md focus:ring-2 focus:ring-blue-600 focus:outline-none text-lg"
            placeholder="Enter area or locality"
          />
        </div>
        <!-- City -->
        <div>
          <label for="city" class="block text-sm font-medium text-gray-700 mb-2">City</label>
          <input
            type="text"
            id="city"
            name="city"
            required
            class="w-full px-4 py-3 border border-blue-300 rounded-md focus:ring-2 focus:ring-blue-600 focus:outline-none text-lg"
            placeholder="Enter city"
          />
        </div>
        <!-- State -->
        <div>
          <label for="state" class="block text-sm font-medium text-gray-700 mb-2">State</label>
          <input
            type="text"
            id="state"
            name="state"
            required
            class="w-full px-4 py-3 border border-blue-300 rounded-md focus:ring-2 focus:ring-blue-600 focus:outline-none text-lg"
            placeholder="Enter state"
          />
        </div>
        <!-- Postal ID -->
        <div>
          <label for="postal_id" class="block text-sm font-medium text-gray-700 mb-2">Postal ID</label>
          <input
            type="text"
            id="postal_id"
            name="postal_id"
            required
            class="w-full px-4 py-3 border border-blue-300 rounded-md focus:ring-2 focus:ring-blue-600 focus:outline-none text-lg"
            placeholder="Enter postal code"
          />
        </div>
      </div>
      <!-- Issue Type Dropdown -->
      <div class="mt-6">
        <label for="issue_type" class="block text-sm font-medium text-gray-700 mb-2">Issue Type</label>
        <select
          id="issue_type"
          name="issue_type"
          required
          class="w-full px-4 py-3 border border-blue-300 rounded-md focus:ring-2 focus:ring-blue-600 focus:outline-none text-lg"
        >
          <option value="" disabled selected>Select an issue type</option>
          <option value="potholes">Potholes</option>
          <option value="garbage_overflow">Garbage Overflow</option>
          <option value="broken_streetlight">Broken Streetlight</option>
          <option value="poor_drainage">Poor Drainage/Flooding</option>
          <option value="delay_approvals">Delay in Approvals or Documents</option>
          <option value="mosquito_breeding">Mosquito Breeding due to Stagnant Water</option>
          <option value="broken_toilets">Broken Public Toilets</option>
          <option value="damaged_roads">Damaged Roads</option>
          <option value="other">Other</option>
        </select>
      </div>
      <!-- Description -->
      <div class="mt-6">
        <label for="description" class="block text-sm font-medium text-gray-700 mb-2">Description</label>
        <textarea
          id="description"
          name="description"
          required
          rows="5"
          class="w-full px-4 py-3 border border-blue-300 rounded-md focus:ring-2 focus:ring-blue-600 focus:outline-none text-lg"
          placeholder="Describe the issue in detail"
        ></textarea>
      </div>
      <!-- Image Upload -->
      <div class="mt-6">
        <label for="images" class="block text-sm font-medium text-gray-700 mb-2">Upload Images (Max 500 KB each)</label>
        <input
          type="file"
          id="images"
          name="images[]"
          accept="image/*"
          multiple
          class="w-full px-4 py-3 border border-blue-300 rounded-md focus:ring-2 focus:ring-blue-600 focus:outline-none text-lg"
        />
        <p id="imageError" class="text-red-600 text-sm mt-2 hidden">Each image must be 500 KB or smaller.</p>
      </div>
      <!-- Video Upload -->
      <div class="mt-6">
        <label for="videos" class="block text-sm font-medium text-gray-700 mb-2">(optional) Upload Videos (Max 1 GB each)</label>
        <input
          type="file"
          id="videos"
          name="videos[]"
          accept="video/*"
          multiple
          class="w-full px-4 py-3 border border-blue-300 rounded-md focus:ring-2 focus:ring-blue-600 focus:outline-none text-lg"
        />
        <p id="videoError" class="text-red-600 text-sm mt-2 hidden">Each video must be 1 GB or smaller.</p>
      </div>
      <!-- Submit Button -->
      <div class="mt-8 text-center">
        <button
          type="submit"
          class="bg-blue-600 text-white px-8 py-3 rounded-md font-semibold hover:bg-blue-500 transition transform hover:scale-105"
        >
          Send Report
        </button>
      </div>
      <!-- Toast -->
      <div id="toast" 
          class="fixed bottom-4 left-1/2 -translate-x-1/2 bg-green-600 text-white 
                  px-4 py-2 rounded-lg shadow-lg hidden transition-opacity duration-300">
        <p id="toastMessage"></p>
</div>
    </form>
  </div>
</section>

<!-- Footer (same as index.html) -->
<footer class="bg-gray-900 text-gray-300">
  <div class="max-w-6xl mx-auto px-6 py-12 grid md:grid-cols-4 gap-10">
    <!-- About -->
    <div>
      <h4 class="text-lg font-bold text-white mb-3">FixMyCity</h4>
      <p class="text-sm leading-relaxed">
        Open-source platform for mapping and reporting city issues, fostering collaboration between citizens, councils, and developers.
      </p>
    </div>
    <!-- Quick Links -->
    <div>
      <h4 class="text-lg font-bold text-white mb-3">Quick Links</h4>
      <ul class="space-y-2 text-sm">
        <li><a href="#report" class="hover:text-blue-400">Report a Problem</a></li>
        <li><a href="#about" class="hover:text-blue-400">About</a></li>
        <li><a href="#support" class="hover:text-blue-400">Support</a></li>
        <li><a href="#faq" class="hover:text-blue-400">FAQs</a></li>
      </ul>
    </div>
    <!-- Feedback -->
    <div>
      <h4 class="text-lg font-bold text-white mb-3">Need Help?</h4>
      <form action="#" method="POST" class="space-y-3">
        <input type="email" placeholder="Your email"
               class="w-full px-3 py-2 rounded bg-gray-800 border border-gray-700 text-sm text-gray-200 focus:outline-none focus:border-blue-500">
        <textarea rows="3" placeholder="Your message"
                  class="w-full px-3 py-2 rounded bg-gray-800 border border-gray-700 text-sm text-gray-200 focus:outline-none focus:border-blue-500"></textarea>
        <button type="submit"
                class="w-full bg-blue-600 text-white font-semibold px-4 py-2 rounded hover:bg-blue-500 transition">
          Send Message
        </button>
      </form>
    </div>
    <!-- CTA -->
    <div class="bg-gray-800 p-5 rounded-lg shadow flex flex-col">
      <h4 class="text-lg font-bold text-white mb-2">We are open-source ðŸ’™</h4>
      <p class="text-sm mb-4">Collaborate with us to build smarter, safer, and more connected cities.</p>
      <a href="https://github.com/PravallikaSurabathula2006/Fix-My-City" target="_blank"
        class="mt-auto inline-block bg-blue-600 text-white font-semibold px-5 py-2 rounded hover:bg-blue-500 transition">
        Contribute on GitHub
      </a>
    </div>
  </div>
  <!-- Bottom -->
  <div class="border-t border-gray-700 text-center text-sm text-gray-500 py-4">
    Â© 2025 FixMyCity | Built with ðŸ’™ for open collaboration
  </div>
</footer>

<!-- JavaScript for File Size Validation and Camera Permission -->
<script>
  // Request camera permission for image/video uploads
  document.getElementById('images').addEventListener('click', async () => {
    try {
      await navigator.permissions.query({ name: 'camera' }).then((permissionStatus) => {
        if (permissionStatus.state === 'prompt') {
          alert('Please grant camera access to upload images.');
        }
      });
    } catch (error) {
      console.error('Error requesting camera permission:', error);
    }
  });

  document.getElementById('videos').addEventListener('click', async () => {
    try {
      await navigator.permissions.query({ name: 'camera' }).then((permissionStatus) => {
        if (permissionStatus.state === 'prompt') {
          alert('Please grant camera access to upload videos.');
        }
      });
    } catch (error) {
      console.error('Error requesting camera permission:', error);
    }
  });

  // Validate image file sizes (500 KB limit)
  document.getElementById('images').addEventListener('change', (event) => {
    const files = event.target.files;
    const maxSize = 500 * 1024; // 500 KB in bytes
    const errorElement = document.getElementById('imageError');
    errorElement.classList.add('hidden');

    for (let file of files) {
      if (file.size > maxSize) {
        errorElement.classList.remove('hidden');
        event.target.value = ''; // Clear the input
        return;
      }
    }
  });

  // Validate video file sizes (1 GB limit)
  document.getElementById('videos').addEventListener('change', (event) => {
    const files = event.target.files;
    const maxSize = 1 * 1024 * 1024 * 1024; // 1 GB in bytes
    const errorElement = document.getElementById('videoError');
    errorElement.classList.add('hidden');

    for (let file of files) {
      if (file.size > maxSize) {
        errorElement.classList.remove('hidden');
        event.target.value = ''; // Clear the input
        return;
      }
    }
  });
const reportForm = document.getElementById("reportForm");
  const toast = document.getElementById("toast");
  const toastMessage = document.getElementById("toastMessage");

  reportForm.addEventListener("submit", function(e) {
    e.preventDefault();

    // Show toast
    toastMessage.textContent = "Submitted your report";
    toast.classList.remove("hidden");

    // Hide after 2 sec
    setTimeout(() => {
      toast.classList.add("hidden");
    }, 2000);

    // Clear form fields
    reportForm.reset();
  });
</script>
</body>
</html>
